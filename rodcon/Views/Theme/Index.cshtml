@model ThemeListViewModel
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="text-center mb-4">
    <h1 class="h3 my-3 font-weight-light"><i class="fas fa-palette"></i> Themes</h1>
</div>
<div class="row">
    <div class="col-md-8 mx-auto">
        @{
            if (Model.themes != null && Model.themes.Count() > 0)
            {
                <div class="list-group">
                    @foreach (var item in Model.themes)
                    {
                        var active = item.cssCdn == Model.CurrentTheme ? "bg-primary" : string.Empty;
                        <form method="post" asp-action="Apply" asp-controller="Theme" id="apply-form">
                            @Html.AntiForgeryToken()
                            @Html.Hidden("cssCdn", item.cssCdn)
                            <button type="submit" class="list-group-item list-group-item-action @active">
                                <div class="row">
                                    <div class="col-sm-3 col-4">
                                        <img src="@item.thumbnail" class="img-thumbnail" @*onclick="ShowThemePreview(this)"*@ data-preview="@item.preview" data-name="@item.name" />
                                    </div>
                                    <div class="col-sm col-8">
                                        <p class="lead">@item.name</p>
                                        <small class="font-weight-light">@item.description</small>
                                    </div>
                                </div>
                            </button>
                        </form>
                    }
                </div>
            }
            else
            {
                <div class="alert alert-danger">
                    Nothing to display!
                </div>
            }
        }
    </div>
</div>
<div class="my-3 text-center">
    <p class="lead">
        Themes courtesy of <a target="_blank" class="font-weight-bold" href="https://bootswatch.com/">bootswatch</a>
    </p>
</div>
<div id="modal_preview" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-full" style="min-width: 100%; margin: 0;">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="modal_title_preview"></h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <iframe style="height: 85vh" id="iframe_preview"></iframe>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    function ShowThemePreview(control) {
        $('#modal_title_preview').html("Preview: " + $(control).attr('data-name'));
        $('#iframe_preview').attr('src', $(control).attr('data-preview'));
        $('#modal_preview').modal('show');
    }
    $('#modal_preview').on('hide.bs.modal', function (e) {
        $('#iframe_preview').attr('src', '');
        $('#modal_title_preview').html('');
    })
</script>